import { Callout } from 'nextra/components'

# 欢迎来到 Tailwindcss-mangle
 
## 为什么需要 tailwindcss-mangle？

虽然 Tailwind CSS 能够高效构建界面，但它生成的工具类也很容易被复制。tailwindcss-mangle 工具链会为 Tailwind 打补丁、提取所有生成的类名，并在构建阶段将它们改写为紧凑的标识符，让最终产物更难被逆向。

## 8.0 有哪些更新？

- `tailwindcss-patch@8.0.0` 全面重构，提供类型化入口、缓存控制，并正式支持 Tailwind v4。
- CLI 新增 `--output`、`--format`、`--css`、`--no-write` 等参数，方便在自动化流程中调用。
- `@tailwindcss-mangle/config` 兼容旧配置，同时启用全新的统一配置对象。
- `unplugin-tailwindcss-mangle` 读取最新的类名清单，并支持 Vite、Webpack、Rollup、Esbuild 与 Nuxt 3。

<Callout type="info">
从 v7.x 升级？请参考 <a href="./migration">迁移指南</a>，按步骤平滑过渡。
</Callout>

## 两步工作流

1. `Patch`
2. `Mangle`

## Patch

为本地 Tailwind 安装打补丁，收集构建上下文，并生成 `.tw-patch/tw-class-list.json`（或按行文本）列出所有工具类。详细 CLI 与 API 说明见 [Patch](./patch)。

## Mangle

将提取出的类名清单提供给 `unplugin-tailwindcss-mangle`，在打包阶段统一改写模板、JSX、MDX 与内联字符串中的匹配类名。请查看 [Mangle](./mangle) 获取集成方式与配置技巧。

## 快速开始

```sh npm2yarn
npm i -D tailwindcss-patch unplugin-tailwindcss-mangle
npx tw-patch install
npx tw-patch extract
```

随后在对应的构建工具中注册插件（如 `unplugin-tailwindcss-mangle/vite`），并指向生成的 `.tw-patch/tw-class-list.json`。

## 工具链组成

- `tailwindcss-patch` —— 为 Tailwind 运行时打补丁，提取类名，并暴露上下文供工具使用。
- `unplugin-tailwindcss-mangle` —— 读取类名清单，在打包阶段重写匹配的类名。
- `@tailwindcss-mangle/config` —— 统一加载并标准化旧版与新版配置。
- `@tailwindcss-mangle/shared` —— 内置类名生成、过滤及通用正则等辅助方法。
